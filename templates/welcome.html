{% extends 'base.html' %}
{% block title %}
  <title>Trading Pro - Dashboard</title>
{% endblock %}
{% block content %}
  <div class="dashboard-container">
    <div class="welcome-container">
      <h1>Welcome, {{ username }}!</h1>
      <p>This is your dashboard.</p>
      <a href="/logout" class="logout-button">Logout</a>
    </div>

    
    <!-- 
        <div class="dashboard-links">
            <h2>Watch List</h2>
            <ul class="watch-list">
                <li><a href="/market">Markets</a></li>
                <li><a href="/plot">Data Visualization</a></li>
                <li><a href="/about">About Us</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </div>
     -->
    <div class="add-symbol-container">
      <form action="{{ url_for('update_watchlist') }}" method="post">
        <input type="text" name="symbol" placeholder="Enter Symbol" required />
        <button type="submit" name="action" value="add">Add to Watchlist</button>
      </form>
    </div>
    <div class="dashboard-watchlist">
      <h2>Your Watchlist</h2>
      <div class="watchlist-items">
        {% for symbol in watchlist_symbols %}
          <div class="watchlist-item">
            <h3>{{ live_data[symbol]['symbol'] }}</h3>
            <p>Open: {{ live_data[symbol]['OPEN'] }}</p>
            <p>Close: {{ live_data[symbol]['CLOSE'] }}</p>
            <form action="{{ url_for('update_watchlist') }}" method="post">
              <input type="hidden" name="symbol" value="{{ symbol }}" />
              <button type="submit" name="action" value="remove">Remove</button>
            </form>
          </div>
        {% endfor %}
      </div>
    </div>
    <br>
    <div class="dashboard-news">
        <h2>Latest News</h2>
        <ul class="news-list">
          {% for article in news_data %}
            <li>
              <a href="{{ article['url'] }}">{{ article['title'] }}</a>
            </li>
          {% endfor %}
        </ul>
      </div>
  </div>
{% endblock %}
