{% extends 'base.html' %}
{% block title%}<title>Trading Pro - Market Plot</title>{% endblock %}
{%block content%}

<div class="stock-header">
    <h1 class="stock-name">{{symbol }} </h1> 
    {% if type == 'stock' and data %}
    {% for sym in data%}
    {% if data[symbol].iloc[0]['sign'] == 1 %}
    <div class="stock-gain">Gain: +{{ data[symbol].iloc[0]['diff'] }}%</div>
    {% else %}
    <div class="stock-loss">Loss: {{data[symbol].iloc[0]['diff'] }}%</div>
    {% endif %}
    {% endfor %}
    {% endif %}

</div>

<div class="plot-page-container">
    <div class="plot-display-container">
        {% if pdv %}
        {{ pdv | safe }}
        {% endif %}
    </div>

<div class="stock-input-container">
    

    <form class="plot-form" method='post'>
        <div class="form-group">
            <label for="options">Display a graph of:</label>
            <select name="options" id="options">
                <option value="OPEN">Opening Price</option>
                <option value="CLOSE">Closing Price</option>
                <option value="LOW">Intraday Low</option>
                <option value="HIGH">Intraday High</option>
                {% if type == 'stock' %}
                <option value="VOLUME">Volume</option>
                <option value="VALUE">Value</option>
                <option value="NO OF TRADES">No of Trades</option>
                {% endif %}
            </select>
        </div>
        <div class="form-group">
            <label for="plottype">Type of graph:</label>
            <select name="plottype" id="plottype">
                <option value="normal">Line Graph</option>
                <option value="candle">Candlestick Plot</option>
            </select>
        </div>
      
        <button type='submit' class="btn">Generate Plot</button>
    </form>
    {% if data %}
        
        {% for sym in data%}
        <div class='stock-info'>
            {% if type == 'stock' %}
            <h3>Stock Information</h3>
            <p>Industry: {{ data[sym].iloc[0]['Industry'] }}</p>
            <p>Market Cap: {{ data[sym].iloc[0]['MarketCap'] }} </p>
            {% endif %}
            <p>Opening Price: {{ data[sym].iloc[0]['OPEN'] }}</p>
            <p>Closing Price: {{ data[sym].iloc[0]['CLOSE'] }}</p>
            {% if type == 'stock' %}
            <p>Volume: {{ data[sym].iloc[0]['VOLUME'] }}</p>
            {% endif %}
            
        </div>
        {% endfor %}
        <form method="post" class="reset-form">
            <button type="submit" name="reset" class="btn reset-btn">Reset</button>
        </form>
       
    {% endif %}
    
    
</div>
</div>
  
    
    

{% endblock %}