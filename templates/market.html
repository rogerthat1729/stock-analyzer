{% extends 'base.html' %}
{% block title%}<title>Trading Pro - Market</title>{% endblock %}
     {%block content%}

    <main class="market-main">
      <section class="market-data">
        <h2>Market Data</h2>
        <p>View the latest market trends and data.</p>
        <div class="market-table">
          <div class="table-header">
            <div>Name-Symbol</div>
            <div>Opening Price</div>
            <div>Closing Price</div>
            <div>Last Traded Price</div>
            <div>Previous Closing Price</div>
            <div>IntraDay High</div>
            <div>IntraDay Low</div>
            <div>52 Wk. High</div>
            <div>52 Wk. Low</div>
            <div>Volume</div>
            <div>Value</div>
            <div>No of Trades</div>
            <div>%Change</div>
        </div>
        {% for stock in stocks %}
        <div class="table-row">
            <div>
                <a href="/market/{{ stock['symbol'] }}">{{ stock['symbol'] }}</a>
            </div>
            <div>{{ stock['OPEN'] }}</div>
            <div>{{ stock['CLOSE'] }}</div>
            <div>{{ stock['LTP'] }}</div>
            <div>{{ stock['PREV. CLOSE'] }}</div>
            <div>{{ stock['HIGH'] }}</div>
            <div>{{ stock['LOW'] }}</div>
            <div>{{ stock['52W H'] }}</div>
            <div>{{ stock['52W L'] }}</div>
            <div>{{ stock['VOLUME'] }}</div>
            <div>{{ stock['VALUE'] }}</div>
            <div>{{ stock['NO OF TRADES'] }}</div>
            {% if stock['sign'] == 1 %}
              <div style = "color: green;">+{{ stock['diff'] }}%</div>
            {% else %}
              <div style="color: red;">{{ stock['diff'] }}%</div>
            {% endif %}
        </div>
        {% endfor %}
        </div>
      </section>

      <aside class="market-filters">
        <h3>Filters</h3>
        <form id="filter-form" method="get">
        <div class="filter-form">
          <label for="open">Min OPEN:</label>
          <input type="number" id="open" name="open" />
          <label for="last-price">Min Last Price:</label>
          <input type="number" id="lastprice" name="last-price" />

          <!-- New Filter for Volume Name -->
          <label for="volume-min">Min Volume:</label>
          <input type="range" id="volume-min" name="volume-min" min="0" max="1000000" step="10000">
          <span id="volume-min-value"></span>
        
          <!-- New Filter for Stock Name -->
          <label for="stock-name">Stock Name:</label>
          <select id="stock-name" name="stock-name">
            <option value="">Select a Stock</option>
            {% for stock in stocks %}
            <option value="{{ stock['symbol'] }}">{{ stock['symbol'] }}</option>
            {% endfor %}
          </select>

          <div class="filter-buttons">
            <button type="submit" class="filter-button">Apply Filters</button>
            <button type="submit" name="reset" class="filter-button reset">Reset</button>
          </div>
        </div>

       
        </form>
      </aside>
    </main>
    {% endblock %}